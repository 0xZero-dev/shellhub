{"remainingRequest":"/src/node_modules/babel-loader/lib/index.js!/src/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/src/node_modules/cache-loader/dist/cjs.js??ref--0-0!/src/node_modules/vue-loader/lib/index.js??vue-loader-options!/src/src/components/device/DeviceDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/src/src/components/device/DeviceDetails.vue","mtime":1589018514661},{"path":"/src/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/src/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/src/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/src/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/src/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9zcmMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgVGVybWluYWxEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL3Rlcm1pbmFsL1Rlcm1pbmFsRGlhbG9nLnZ1ZSc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdEZXZpY2VEZXRhaWxzJywKICBjb21wb25lbnRzOiB7CiAgICBUZXJtaW5hbERpYWxvZzogVGVybWluYWxEaWFsb2cKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICB1aWQ6ICcnLAogICAgICBob3N0bmFtZTogd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLAogICAgICBlZGl0TmFtZTogJycsCiAgICAgIGhpZGU6IHRydWUsCiAgICAgIGRldmljZTogW10sCiAgICAgIGRldmljZUljb246IHsKICAgICAgICBhcmNoOiAnZmwtYXJjaGxpbnV4JywKICAgICAgICB1YnVudHU6ICdmbC11YnVudHUnLAogICAgICAgIHJhc3BiaWFuOiAnZmwtcmFzcGJlcnJ5LXBpJywKICAgICAgICAndWJ1bnR1LWNvcmUnOiAnZmwtdWJ1bnR1JwogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzLnVpZCA9IF90aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnZGV2aWNlcy9nZXQnLCBfdGhpcy51aWQpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF90aGlzLmRldmljZSA9IF90aGlzLiRzdG9yZS5nZXR0ZXJzWyJkZXZpY2VzL2dldCJdOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNzsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgIF90aGlzLmhpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICBfdGhpcy5kaWFsb2cgPSB0cnVlOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxLCA3XV0pOwogICAgfSkpKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZGV2aWNlcy9yZW5hbWUnLCB7CiAgICAgICAgdWlkOiB0aGlzLmRldmljZS51aWQsCiAgICAgICAgbmFtZTogdGhpcy5lZGl0TmFtZQogICAgICB9KTsKICAgICAgdGhpcy5kZXZpY2UubmFtZSA9IHRoaXMuZWRpdE5hbWU7CiAgICB9LAogICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7CiAgICAgIGlmIChjb25maXJtKCdBcmUgeW91IHN1cmU/JykpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZGV2aWNlcy9yZW1vdmUnLCB0aGlzLmRldmljZS51aWQpOwogICAgICB9CiAgICB9LAogICAgZm9ybWF0X2RhdGU6IGZ1bmN0aW9uIGZvcm1hdF9kYXRlKCkgewogICAgICByZXR1cm4gbW9tZW50KFN0cmluZyh0aGlzLmRldmljZS5sYXN0X3NlZW4pKS5mb3JtYXQoJ0RELU1NLVlZWVknKTsKICAgIH0sCiAgICByZWRpcmVjdDogZnVuY3Rpb24gcmVkaXJlY3QoKSB7CiAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvZGV2aWNlcycpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["DeviceDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA,OAAA,cAAA,MAAA,0CAAA;AACA,OAAA,MAAA,MAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAGA,EAAA,UAAA,EAAA;AACA,IAAA,cAAA,EAAA;AADA,GAHA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,KADA;AAEA,MAAA,GAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,MAAA,CAAA,QAAA,CAAA,QAHA;AAIA,MAAA,QAAA,EAAA,EAJA;AAKA,MAAA,IAAA,EAAA,IALA;AAMA,MAAA,MAAA,EAAA,EANA;AAOA,MAAA,UAAA,EAAA;AACA,QAAA,IAAA,EAAA,cADA;AAEA,QAAA,MAAA,EAAA,WAFA;AAGA,QAAA,QAAA,EAAA,iBAHA;AAIA,uBAAA;AAJA;AAPA,KAAA;AAcA,GAtBA;AAwBA,EAAA,OAxBA,qBAwBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,cAAA,KAAA,CAAA,GAAA,GAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AADA;AAAA;AAAA,qBAGA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,aAAA,EAAA,KAAA,CAAA,GAAA,CAHA;;AAAA;AAIA,cAAA,KAAA,CAAA,MAAA,GAAA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA,aAAA,CAAA;AAJA;AAAA;;AAAA;AAAA;AAAA;AAOA,cAAA,KAAA,CAAA,IAAA,GAAA,KAAA;AACA,cAAA,KAAA,CAAA,MAAA,GAAA,IAAA;;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA,GAlCA;AAmCA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,gBAAA,EAAA;AACA,QAAA,GAAA,EAAA,KAAA,MAAA,CAAA,GADA;AAEA,QAAA,IAAA,EAAA,KAAA;AAFA,OAAA;AAKA,WAAA,MAAA,CAAA,IAAA,GAAA,KAAA,QAAA;AACA,KARA;AASA,IAAA,MATA,oBASA;AACA,UAAA,OAAA,CAAA,eAAA,CAAA,EAAA;AACA,aAAA,MAAA,CAAA,QAAA,CAAA,gBAAA,EAAA,KAAA,MAAA,CAAA,GAAA;AACA;AACA,KAbA;AAcA,IAAA,WAdA,yBAcA;AACA,aAAA,MAAA,CAAA,MAAA,CAAA,KAAA,MAAA,CAAA,SAAA,CAAA,CAAA,CAAA,MAAA,CAAA,YAAA,CAAA;AACA,KAhBA;AAiBA,IAAA,QAjBA,sBAiBA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,UAAA;AACA;AApBA;AAnCA,CAAA","sourcesContent":["<template>\n<fragment>\n\n  <div class=\"d-flex pa-0 align-center\">\n    <h1 v-if=\"hide\">Device Details</h1>\n  </div>\n  \n  <v-card class=\"mt-2\" v-if=\"hide\">\n    <v-toolbar flat color=\"transparent\">\n      \n      <v-edit-dialog :return-value=\"editName\" large @open=\"editName = device.name\" @save=\"save()\">\n        <v-text-field slot=\"input\" v-model=\"editName\" label=\"Edit\" single-line></v-text-field>\n        <v-toolbar-title>\n          <v-icon color=\"success\" v-if=\"this.device.online\">check_circle</v-icon>\n          <v-tooltip bottom v-else>\n            <template #activator=\"{ on }\">\n              <v-icon v-on=\"on\">check_circle</v-icon>\n            </template>\n            <span>active {{ device.last_seen | moment(\"from\", \"now\") }}</span>\n          </v-tooltip>\n          {{ this.device.name }}\n          <v-icon small left>mdi-file-edit</v-icon>\n        </v-toolbar-title>\n      </v-edit-dialog>\n      \n      <v-spacer></v-spacer>\n      \n      <TerminalDialog :uid=\"device.uid\"></TerminalDialog>\n      \n      <v-btn icon>\n        <v-icon @click=\"remove()\">delete</v-icon>\n      </v-btn>\n    </v-toolbar>\n\n      <v-divider></v-divider>\n\n      <v-card-text>\n        <div class=\"mt-2\">\n          <div class=\"overline\">UID</div>\n          <div>{{ this.device.uid }}</div>\n        </div>\n        \n        <div class=\"mt-2\">\n          <div class=\"overline\">MAC</div>\n          <code v-if=\"this.device.identity\">{{ this.device.identity['mac'] }}</code>\n        </div>\n\n        <div class=\"mt-2\">\n          <div class=\"overline\">Operating System</div>\n          <div v-if=\"this.device.info\">\n            <v-icon left>{{ deviceIcon[device.info.id] || 'fl-tux' }}</v-icon>\n            {{ this.device.info.pretty_name }}\n          </div>\n        </div>\n\n        <div class=\"mt-2\">\n          <div class=\"overline\">Last Seen</div>\n          <div>{{ this.device.last_seen | moment(\"dddd, MMMM Do YYYY, h:mm:ss a\") }}</div>\n        </div>\n      </v-card-text>\n\n    </v-card>\n\n  <div class=\"text-center\">\n    <v-dialog persistent v-model=\"dialog\" width=\"500\">\n      <v-card>\n        <v-card-title class=\"headline grey lighten-2\" primary-title>\n          Device ID error\n        </v-card-title>\n        <v-card-text>\n        <br>\n          You tried to access a non-existing device ID.\n        </v-card-text>\n        <v-divider></v-divider>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"primary\" text @click=\"redirect\">\n            Go back to devices\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</fragment>\n</template>\n\n<script>\n\nimport TerminalDialog from '@/components/terminal/TerminalDialog.vue';\nimport moment from 'moment';\n\nexport default {\n  name: 'DeviceDetails',\n\n  components: {\n    TerminalDialog\n  },\n\n  data() {\n    return {\n      dialog:false,\n      uid: '',\n      hostname: window.location.hostname,\n      editName: '',\n      hide:true,\n      device: [],\n      deviceIcon: {\n        arch: 'fl-archlinux',\n        ubuntu: 'fl-ubuntu',\n        raspbian: 'fl-raspberry-pi',\n        'ubuntu-core': 'fl-ubuntu'\n      },\n    };\n  },\n\n  async created() {\n    this.uid = this.$route.params.id;\n    try{\n      await this.$store.dispatch('devices/get', this.uid);\n      this.device = this.$store.getters[\"devices/get\"];\n    }\n    catch(error){\n      this.hide=false;\n      this.dialog=true;\n    } \n  },\n  methods: {\n    save() {\n      this.$store.dispatch('devices/rename', {\n        uid: this.device.uid,\n        name: this.editName\n      });\n\n      this.device.name = this.editName;\n    },\n    remove() {\n      if (confirm('Are you sure?')) {\n        this.$store.dispatch('devices/remove', this.device.uid);\n      }\n    },\n    format_date() {\n      return moment(String(this.device.last_seen)).format('DD-MM-YYYY');\n    },\n    redirect(){\n      this.dialog=false;\n      this.$router.push('/devices');\n    }\n  },\n\n};\n</script>\n"],"sourceRoot":"src/components/device"}]}