{"remainingRequest":"/src/node_modules/babel-loader/lib/index.js!/src/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/src/node_modules/cache-loader/dist/cjs.js??ref--0-0!/src/node_modules/vue-loader/lib/index.js??vue-loader-options!/src/src/components/session/SessionList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/src/src/components/session/SessionList.vue","mtime":1589018514661},{"path":"/src/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/src/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/src/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/src/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/src/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL3NyYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2Vzc2lvbkxpc3QiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZXNzaW9uU25hY2s6IGZhbHNlLAogICAgICBudW1iZXJTZXNzaW9uczogMCwKICAgICAgbGlzdFNlc3Npb25zOiBbXSwKICAgICAgZGF0YTogW10sCiAgICAgIHBhZ2luYXRpb246IHt9LAogICAgICBoZWFkZXJzOiBbewogICAgICAgIHRleHQ6ICJBY3RpdmUiLAogICAgICAgIHZhbHVlOiAiYWN0aXZlIiwKICAgICAgICBhbGlnbjogImNlbnRlciIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJEZXZpY2UiLAogICAgICAgIHZhbHVlOiAiZGV2aWNlIiwKICAgICAgICBhbGlnbjogImNlbnRlciIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJVc2VybmFtZSIsCiAgICAgICAgdmFsdWU6ICJ1c2VybmFtZSIsCiAgICAgICAgYWxpZ246ICJjZW50ZXIiCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiQXV0aGVudGljYXRlZCIsCiAgICAgICAgdmFsdWU6ICJhdXRoZW50aWNhdGVkIiwKICAgICAgICBhbGlnbjogImNlbnRlciIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJJUCBBZGRyZXNzIiwKICAgICAgICB2YWx1ZTogImlwX2FkZHJlc3MiLAogICAgICAgIGFsaWduOiAiY2VudGVyIgogICAgICB9LCB7CiAgICAgICAgdGV4dDogIlN0YXJ0ZWQiLAogICAgICAgIHZhbHVlOiAic3RhcnRlZCIsCiAgICAgICAgYWxpZ246ICJjZW50ZXIiCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiTGFzdCBTZWVuIiwKICAgICAgICB2YWx1ZTogImxhc3Rfc2VlbiIsCiAgICAgICAgYWxpZ246ICJjZW50ZXIiCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiQWN0aW9ucyIsCiAgICAgICAgdmFsdWU6ICJhY3Rpb25zIiwKICAgICAgICBhbGlnbjogImNlbnRlciIKICAgICAgfV0KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgcGFnaW5hdGlvbjogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICB2YXIgcm93c1BlclBhZ2UsIHBhZ2VOdW1iZXI7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIHJvd3NQZXJQYWdlID0gX3RoaXMucGFnaW5hdGlvbi5pdGVtc1BlclBhZ2U7CiAgICAgICAgICAgICAgICAgIHBhZ2VOdW1iZXIgPSBfdGhpcy5wYWdpbmF0aW9uLnBhZ2U7CiAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGEgPSBbewogICAgICAgICAgICAgICAgICAgICdwZXJfcGFnZSc6IHJvd3NQZXJQYWdlLAogICAgICAgICAgICAgICAgICAgICdwYWdlJzogcGFnZU51bWJlcgogICAgICAgICAgICAgICAgICB9XTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNlc3Npb25zL2ZldGNoIiwgX3RoaXMuZGF0YVswXSk7CgogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBfdGhpcy5saXN0U2Vzc2lvbnMgPSBfdGhpcy4kc3RvcmUuZ2V0dGVyc1sic2Vzc2lvbnMvbGlzdCJdOwogICAgICAgICAgICAgICAgICBfdGhpcy5udW1iZXJTZXNzaW9ucyA9IF90aGlzLiRzdG9yZS5nZXR0ZXJzWyJzZXNzaW9ucy9nZXROdW1iZXJTZXNzaW9ucyJdOwoKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSkoKTsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZGV0YWlsc1Nlc3Npb246IGZ1bmN0aW9uIGRldGFpbHNTZXNzaW9uKHNlc3Npb24pIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9zZXNzaW9uLyIgKyBzZXNzaW9uLnVpZCk7CiAgICB9LAogICAgY2xvc2VTZXNzaW9uOiBmdW5jdGlvbiBjbG9zZVNlc3Npb24oc2Vzc2lvbikgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm0oIkFyZSB5b3Ugc3VyZT8iLCBzZXNzaW9uKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMi4kc3RvcmUuZGlzcGF0Y2goInNlc3Npb25zL2Nsb3NlIiwgc2Vzc2lvbik7CgogICAgICAgICAgICAgICAgX3RoaXMyLnNlc3Npb25TbmFjayA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRzdG9yZS5kaXNwYXRjaCgic2Vzc2lvbnMvZmV0Y2giKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX3RoaXMyLmxpc3RTZXNzaW9ucyA9IF90aGlzMi4kc3RvcmUuZ2V0dGVyc1sic2Vzc2lvbnMvbGlzdCJdOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["SessionList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<fragment>\n\n  <div class=\"d-flex pa-0 align-center\">\n    <h1>Sessions</h1>\n    <v-spacer/>\n    <v-spacer/>\n  </div>\n\n  <v-card class=\"mt-2\">\n    <v-app-bar flat color=\"transparent\">\n      <v-toolbar-title></v-toolbar-title>\n    </v-app-bar>\n\n    <v-divider></v-divider>\n\n    <v-card-text class=\"pa-0\">\n      <v-data-table :headers=\"headers\" :items=listSessions item-key=\"uid\" :sort-by=\"['started_at']\" :sort-desc=\"[true]\" :items-per-page=\"10\" :footer-props=\"{'items-per-page-options': [10, 25, 50, 100]}\" :server-items-length='this.numberSessions' :options.sync='pagination' :disable-sort=\"true\">\n        <template v-slot:item.active=\"{ item }\">\n          <v-icon color=\"success\" v-if=\"item.active\">check_circle</v-icon>\n          <v-tooltip bottom v-else>\n            <template #activator=\"{ on }\">\n              <v-icon v-on=\"on\">check_circle</v-icon>\n            </template>\n            <span>active {{ item.last_seen | moment(\"from\", \"now\") }}</span>\n          </v-tooltip>\n        </template>\n\n        <template v-slot:item.device=\"{ item }\">\n          <router-link :to=\"{ name: 'detailsDevice', params: { id: item.device.uid } }\">\n            {{ item.device.name }}\n          </router-link>\n        </template>\n\n        <template v-slot:item.username=\"{ item }\">\n          <v-tooltip bottom v-if=\"!item.authenticated\">\n            <template #activator=\"{ on }\">\n            </template>\n            <span>Unauthorized</span>\n          </v-tooltip>\n          {{ item.username }}\n        </template>\n\n        <template v-slot:item.authenticated=\"{ item }\">\n          <v-tooltip bottom>\n            <template #activator=\"{ on }\">\n              <v-icon v-on=\"on\" :color=\"item.active ? 'success' : ''\" size=\"\" v-if=\"item.authenticated\">mdi-shield-check</v-icon>\n              <v-icon v-on=\"on\" color=\"error\" size=\"\" v-else>mdi-shield-alert</v-icon>\n            </template>\n            <span v-if=\"item.authenticated\">User has been authenticated</span>\n            <span v-else>User has not been authenticated</span>\n          </v-tooltip>\n        </template>\n\n        <template v-slot:item.ip_address=\"{ item }\">\n          <code>{{ item.ip_address }}</code>\n        </template>\n\n        <template v-slot:item.started=\"{ item }\">\n          {{ item.started_at | moment(\"ddd, MMM Do YY, h:mm:ss a\")}}\n        </template>\n\n        <template v-slot:item.last_seen=\"{ item }\">\n          {{ item.last_seen | moment(\"ddd, MMM Do YY, h:mm:ss a\")}}\n        </template>\n\n        <template v-slot:item.actions=\"{ item }\">\n          <v-icon class=\"icons\" @click=\"detailsSession(item)\">\n            info\n          </v-icon>\n\n          <v-icon class=\"icons ml-1\" v-if=\"item.active\" @click=\"closeSession(item)\">\n            mdi-close-circle\n          </v-icon>\n        </template>\n      </v-data-table>\n    </v-card-text>\n  <v-snackbar v-model=\"sessionSnack\" :timeout=3000>Session closed</v-snackbar>\n  </v-card>\n\n</fragment>\n</template>\n\n<script>\nexport default {\n  name: \"SessionList\",\n\n  data() {\n    return {\n      sessionSnack: false,\n      numberSessions: 0,\n      listSessions: [],\n      data: [],\n      pagination: {},\n\n      headers: [\n        {\n          text: \"Active\",\n          value: \"active\",\n          align: \"center\"\n        },\n        {\n          text: \"Device\",\n          value: \"device\",\n          align: \"center\"\n        },\n        {\n          text: \"Username\",\n          value: \"username\",\n          align: \"center\"\n        },\n        {\n          text: \"Authenticated\",\n          value: \"authenticated\",\n          align: \"center\"\n        },\n        {\n          text: \"IP Address\",\n          value: \"ip_address\",\n          align: \"center\"\n        },\n        {\n          text: \"Started\",\n          value: \"started\",\n          align: \"center\"\n        },\n        {\n          text: \"Last Seen\",\n          value: \"last_seen\",\n          align: \"center\"\n        },\n        {\n          text: \"Actions\",\n          value: \"actions\",\n          align: \"center\"\n        }\n      ]\n    };\n  },\n\n  watch: {\n    pagination: {\n      async handler () {\n        const rowsPerPage = this.pagination.itemsPerPage\n        const pageNumber = this.pagination.page\n\n        this.data =  [{'per_page': rowsPerPage, 'page':pageNumber}]\n\n        await this.$store.dispatch(\"sessions/fetch\", this.data[0]);\n        this.listSessions = this.$store.getters[\"sessions/list\"];\n        this.numberSessions = this.$store.getters[\"sessions/getNumberSessions\"]; \n      },\n      deep: true\n    },\n  },\n\n  methods: {\n    detailsSession(session) {\n      this.$router.push(\"/session/\" + session.uid);\n    },\n    async closeSession(session) {\n      if (confirm(\"Are you sure?\", session)) {\n        this.$store.dispatch(\"sessions/close\", session);\n        this.sessionSnack = true;\n\n        await this.$store.dispatch(\"sessions/fetch\");\n        this.listSessions = this.$store.getters[\"sessions/list\"];\n      }\n    },\n  }\n};\n</script>\n"],"sourceRoot":"src/components/session"}]}