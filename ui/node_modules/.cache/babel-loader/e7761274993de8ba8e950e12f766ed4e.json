{"remainingRequest":"/home/ubuntu/shellhub/ui/node_modules/babel-loader/lib/index.js!/home/ubuntu/shellhub/ui/node_modules/eslint-loader/index.js??ref--13-0!/home/ubuntu/shellhub/ui/src/modules/auth.js","dependencies":[{"path":"/home/ubuntu/shellhub/ui/src/modules/auth.js","mtime":1589018514661},{"path":"/home/ubuntu/shellhub/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ubuntu/shellhub/ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ubuntu/shellhub/ui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvdWJ1bnR1L3NoZWxsaHViL3VpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgbG9naW4gYXMgX2xvZ2luIH0gZnJvbSAnQC9hcGkvYXV0aCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICBzdGF0dXM6ICcnLAogICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpIHx8ICcnLAogICAgdXNlcjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSB8fCAnJywKICAgIHRlbmFudDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RlbmFudCcpIHx8ICcnCiAgfSwKICBnZXR0ZXJzOiB7CiAgICBpc0xvZ2dlZEluOiBmdW5jdGlvbiBpc0xvZ2dlZEluKHN0YXRlKSB7CiAgICAgIHJldHVybiAhIXN0YXRlLnRva2VuOwogICAgfSwKICAgIGF1dGhTdGF0dXM6IGZ1bmN0aW9uIGF1dGhTdGF0dXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnN0YXR1czsKICAgIH0sCiAgICBjdXJyZW50VXNlcjogZnVuY3Rpb24gY3VycmVudFVzZXIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXI7CiAgICB9LAogICAgdGVuYW50OiBmdW5jdGlvbiB0ZW5hbnQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnRlbmFudDsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgYXV0aF9yZXF1ZXN0OiBmdW5jdGlvbiBhdXRoX3JlcXVlc3Qoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzID0gJ2xvYWRpbmcnOwogICAgfSwKICAgIGF1dGhfc3VjY2VzczogZnVuY3Rpb24gYXV0aF9zdWNjZXNzKHN0YXRlLCBkYXRhKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICdzdWNjZXNzJzsKICAgICAgc3RhdGUudG9rZW4gPSBkYXRhLnRva2VuOwogICAgICBzdGF0ZS51c2VyID0gZGF0YS51c2VyOwogICAgICBzdGF0ZS50ZW5hbnQgPSBkYXRhLnRlbmFudDsKICAgIH0sCiAgICBhdXRoX2Vycm9yOiBmdW5jdGlvbiBhdXRoX2Vycm9yKHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICdlcnJvcic7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzID0gJyc7CiAgICAgIHN0YXRlLnRva2VuID0gJyc7CiAgICAgIHN0YXRlLnVzZXIgPSAnJzsKICAgICAgc3RhdGUudGVuYW50ID0gJyc7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oY29udGV4dCwgdXNlcikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXNwOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhdXRoX3JlcXVlc3QnKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2xvZ2luKHVzZXIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlc3AuZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIHJlc3AuZGF0YS51c2VyKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZW5hbnQnLCByZXNwLmRhdGEudGVuYW50KTsKICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhdXRoX3N1Y2Nlc3MnLCByZXNwLmRhdGEpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ2F1dGhfZXJyb3InKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTFdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KGNvbnRleHQpIHsKICAgICAgY29udGV4dC5jb21taXQoJ2xvZ291dCcpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3RlbmFudCcpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/ubuntu/shellhub/ui/src/modules/auth.js"],"names":["login","namespaced","state","status","token","localStorage","getItem","user","tenant","getters","isLoggedIn","authStatus","currentUser","mutations","auth_request","auth_success","data","auth_error","logout","actions","context","commit","resp","setItem","removeItem"],"mappings":"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","sourcesContent":["import { login } from '@/api/auth'\n\nexport default {\n    namespaced: true,\n\n    state: {\n        status: '',\n        token: localStorage.getItem('token') || '',\n        user: localStorage.getItem('user') || '',\n        tenant: localStorage.getItem('tenant') || ''\n    },\n\n    getters: {\n        isLoggedIn: state => !!state.token,\n        authStatus: state => state.status,\n        currentUser: state => state.user,\n        tenant: state => state.tenant,\n    },\n\n    mutations: {\n        auth_request(state) {\n            state.status = 'loading'\n        },\n\n        auth_success(state, data) {\n            state.status = 'success'\n            state.token = data.token\n            state.user = data.user\n            state.tenant = data.tenant\n        },\n\n        auth_error(state) {\n            state.status = 'error'\n        },\n\n        logout(state) {\n            state.status = ''\n            state.token = ''\n            state.user = ''\n            state.tenant = ''\n        },\n    },\n\n    actions: {\n        async login(context, user) {\n            context.commit('auth_request')\n\n            try {\n                const resp = await login(user);\n\n                localStorage.setItem('token', resp.data.token)\n                localStorage.setItem('user', resp.data.user)\n                localStorage.setItem('tenant', resp.data.tenant)\n\n                context.commit('auth_success', resp.data)\n            } catch (err) {\n                context.commit('auth_error')\n            }\n        },\n\n        logout(context) {\n            context.commit('logout')\n            localStorage.removeItem('token');\n            localStorage.removeItem('user');\n            localStorage.removeItem('tenant');\n        }\n    }\n}"]}]}