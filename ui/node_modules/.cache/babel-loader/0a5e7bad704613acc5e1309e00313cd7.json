{"remainingRequest":"/src/node_modules/babel-loader/lib/index.js!/src/node_modules/eslint-loader/index.js??ref--13-0!/src/src/modules/auth.js","dependencies":[{"path":"/src/src/modules/auth.js","mtime":1589018514661},{"path":"/src/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/src/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/src/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL3NyYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiB9IGZyb20gJ0AvYXBpL2F1dGgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgc3RhdHVzOiAnJywKICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSB8fCAnJywKICAgIHVzZXI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykgfHwgJycsCiAgICB0ZW5hbnQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0ZW5hbnQnKSB8fCAnJwogIH0sCiAgZ2V0dGVyczogewogICAgaXNMb2dnZWRJbjogZnVuY3Rpb24gaXNMb2dnZWRJbihzdGF0ZSkgewogICAgICByZXR1cm4gISFzdGF0ZS50b2tlbjsKICAgIH0sCiAgICBhdXRoU3RhdHVzOiBmdW5jdGlvbiBhdXRoU3RhdHVzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zdGF0dXM7CiAgICB9LAogICAgY3VycmVudFVzZXI6IGZ1bmN0aW9uIGN1cnJlbnRVc2VyKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VyOwogICAgfSwKICAgIHRlbmFudDogZnVuY3Rpb24gdGVuYW50KHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50ZW5hbnQ7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIGF1dGhfcmVxdWVzdDogZnVuY3Rpb24gYXV0aF9yZXF1ZXN0KHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICdsb2FkaW5nJzsKICAgIH0sCiAgICBhdXRoX3N1Y2Nlc3M6IGZ1bmN0aW9uIGF1dGhfc3VjY2VzcyhzdGF0ZSwgZGF0YSkgewogICAgICBzdGF0ZS5zdGF0dXMgPSAnc3VjY2Vzcyc7CiAgICAgIHN0YXRlLnRva2VuID0gZGF0YS50b2tlbjsKICAgICAgc3RhdGUudXNlciA9IGRhdGEudXNlcjsKICAgICAgc3RhdGUudGVuYW50ID0gZGF0YS50ZW5hbnQ7CiAgICB9LAogICAgYXV0aF9lcnJvcjogZnVuY3Rpb24gYXV0aF9lcnJvcihzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMgPSAnZXJyb3InOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICcnOwogICAgICBzdGF0ZS50b2tlbiA9ICcnOwogICAgICBzdGF0ZS51c2VyID0gJyc7CiAgICAgIHN0YXRlLnRlbmFudCA9ICcnOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKGNvbnRleHQsIHVzZXIpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzcDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnYXV0aF9yZXF1ZXN0Jyk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIF9sb2dpbih1c2VyKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXNwLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCByZXNwLmRhdGEudXNlcik7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVuYW50JywgcmVzcC5kYXRhLnRlbmFudCk7CiAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnYXV0aF9zdWNjZXNzJywgcmVzcC5kYXRhKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhdXRoX2Vycm9yJyk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDExXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChjb250ZXh0KSB7CiAgICAgIGNvbnRleHQuY29tbWl0KCdsb2dvdXQnKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0ZW5hbnQnKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/src/src/modules/auth.js"],"names":["login","namespaced","state","status","token","localStorage","getItem","user","tenant","getters","isLoggedIn","authStatus","currentUser","mutations","auth_request","auth_success","data","auth_error","logout","actions","context","commit","resp","setItem","removeItem"],"mappings":"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","sourcesContent":["import { login } from '@/api/auth'\n\nexport default {\n    namespaced: true,\n\n    state: {\n        status: '',\n        token: localStorage.getItem('token') || '',\n        user: localStorage.getItem('user') || '',\n        tenant: localStorage.getItem('tenant') || ''\n    },\n\n    getters: {\n        isLoggedIn: state => !!state.token,\n        authStatus: state => state.status,\n        currentUser: state => state.user,\n        tenant: state => state.tenant,\n    },\n\n    mutations: {\n        auth_request(state) {\n            state.status = 'loading'\n        },\n\n        auth_success(state, data) {\n            state.status = 'success'\n            state.token = data.token\n            state.user = data.user\n            state.tenant = data.tenant\n        },\n\n        auth_error(state) {\n            state.status = 'error'\n        },\n\n        logout(state) {\n            state.status = ''\n            state.token = ''\n            state.user = ''\n            state.tenant = ''\n        },\n    },\n\n    actions: {\n        async login(context, user) {\n            context.commit('auth_request')\n\n            try {\n                const resp = await login(user);\n\n                localStorage.setItem('token', resp.data.token)\n                localStorage.setItem('user', resp.data.user)\n                localStorage.setItem('tenant', resp.data.tenant)\n\n                context.commit('auth_success', resp.data)\n            } catch (err) {\n                context.commit('auth_error')\n            }\n        },\n\n        logout(context) {\n            context.commit('logout')\n            localStorage.removeItem('token');\n            localStorage.removeItem('user');\n            localStorage.removeItem('tenant');\n        }\n    }\n}"]}]}