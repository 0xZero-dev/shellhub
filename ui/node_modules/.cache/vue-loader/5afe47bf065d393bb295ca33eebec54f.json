{"remainingRequest":"/home/ubuntu/shellhub/ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/shellhub/ui/src/components/session/SessionList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ubuntu/shellhub/ui/src/components/session/SessionList.vue","mtime":1589018514661},{"path":"/home/ubuntu/shellhub/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ubuntu/shellhub/ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ubuntu/shellhub/ui/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/ubuntu/shellhub/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ubuntu/shellhub/ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2Vzc2lvbkxpc3QiLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2Vzc2lvblNuYWNrOiBmYWxzZSwKICAgICAgbnVtYmVyU2Vzc2lvbnM6IDAsCiAgICAgIGxpc3RTZXNzaW9uczogW10sCiAgICAgIGRhdGE6IFtdLAogICAgICBwYWdpbmF0aW9uOiB7fSwKCiAgICAgIGhlYWRlcnM6IFsKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiAiQWN0aXZlIiwKICAgICAgICAgIHZhbHVlOiAiYWN0aXZlIiwKICAgICAgICAgIGFsaWduOiAiY2VudGVyIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogIkRldmljZSIsCiAgICAgICAgICB2YWx1ZTogImRldmljZSIsCiAgICAgICAgICBhbGlnbjogImNlbnRlciIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICJVc2VybmFtZSIsCiAgICAgICAgICB2YWx1ZTogInVzZXJuYW1lIiwKICAgICAgICAgIGFsaWduOiAiY2VudGVyIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogIkF1dGhlbnRpY2F0ZWQiLAogICAgICAgICAgdmFsdWU6ICJhdXRoZW50aWNhdGVkIiwKICAgICAgICAgIGFsaWduOiAiY2VudGVyIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogIklQIEFkZHJlc3MiLAogICAgICAgICAgdmFsdWU6ICJpcF9hZGRyZXNzIiwKICAgICAgICAgIGFsaWduOiAiY2VudGVyIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogIlN0YXJ0ZWQiLAogICAgICAgICAgdmFsdWU6ICJzdGFydGVkIiwKICAgICAgICAgIGFsaWduOiAiY2VudGVyIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogIkxhc3QgU2VlbiIsCiAgICAgICAgICB2YWx1ZTogImxhc3Rfc2VlbiIsCiAgICAgICAgICBhbGlnbjogImNlbnRlciIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICJBY3Rpb25zIiwKICAgICAgICAgIHZhbHVlOiAiYWN0aW9ucyIsCiAgICAgICAgICBhbGlnbjogImNlbnRlciIKICAgICAgICB9CiAgICAgIF0KICAgIH07CiAgfSwKCiAgd2F0Y2g6IHsKICAgIHBhZ2luYXRpb246IHsKICAgICAgYXN5bmMgaGFuZGxlciAoKSB7CiAgICAgICAgY29uc3Qgcm93c1BlclBhZ2UgPSB0aGlzLnBhZ2luYXRpb24uaXRlbXNQZXJQYWdlCiAgICAgICAgY29uc3QgcGFnZU51bWJlciA9IHRoaXMucGFnaW5hdGlvbi5wYWdlCgogICAgICAgIHRoaXMuZGF0YSA9ICBbeydwZXJfcGFnZSc6IHJvd3NQZXJQYWdlLCAncGFnZSc6cGFnZU51bWJlcn1dCgogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzZXNzaW9ucy9mZXRjaCIsIHRoaXMuZGF0YVswXSk7CiAgICAgICAgdGhpcy5saXN0U2Vzc2lvbnMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyJzZXNzaW9ucy9saXN0Il07CiAgICAgICAgdGhpcy5udW1iZXJTZXNzaW9ucyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbInNlc3Npb25zL2dldE51bWJlclNlc3Npb25zIl07IAogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9LAogIH0sCgogIG1ldGhvZHM6IHsKICAgIGRldGFpbHNTZXNzaW9uKHNlc3Npb24pIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9zZXNzaW9uLyIgKyBzZXNzaW9uLnVpZCk7CiAgICB9LAogICAgYXN5bmMgY2xvc2VTZXNzaW9uKHNlc3Npb24pIHsKICAgICAgaWYgKGNvbmZpcm0oIkFyZSB5b3Ugc3VyZT8iLCBzZXNzaW9uKSkgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzZXNzaW9ucy9jbG9zZSIsIHNlc3Npb24pOwogICAgICAgIHRoaXMuc2Vzc2lvblNuYWNrID0gdHJ1ZTsKCiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNlc3Npb25zL2ZldGNoIik7CiAgICAgICAgdGhpcy5saXN0U2Vzc2lvbnMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyJzZXNzaW9ucy9saXN0Il07CiAgICAgIH0KICAgIH0sCiAgfQp9Owo="},{"version":3,"sources":["SessionList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"SessionList.vue","sourceRoot":"src/components/session","sourcesContent":["<template>\n<fragment>\n\n  <div class=\"d-flex pa-0 align-center\">\n    <h1>Sessions</h1>\n    <v-spacer/>\n    <v-spacer/>\n  </div>\n\n  <v-card class=\"mt-2\">\n    <v-app-bar flat color=\"transparent\">\n      <v-toolbar-title></v-toolbar-title>\n    </v-app-bar>\n\n    <v-divider></v-divider>\n\n    <v-card-text class=\"pa-0\">\n      <v-data-table :headers=\"headers\" :items=listSessions item-key=\"uid\" :sort-by=\"['started_at']\" :sort-desc=\"[true]\" :items-per-page=\"10\" :footer-props=\"{'items-per-page-options': [10, 25, 50, 100]}\" :server-items-length='this.numberSessions' :options.sync='pagination' :disable-sort=\"true\">\n        <template v-slot:item.active=\"{ item }\">\n          <v-icon color=\"success\" v-if=\"item.active\">check_circle</v-icon>\n          <v-tooltip bottom v-else>\n            <template #activator=\"{ on }\">\n              <v-icon v-on=\"on\">check_circle</v-icon>\n            </template>\n            <span>active {{ item.last_seen | moment(\"from\", \"now\") }}</span>\n          </v-tooltip>\n        </template>\n\n        <template v-slot:item.device=\"{ item }\">\n          <router-link :to=\"{ name: 'detailsDevice', params: { id: item.device.uid } }\">\n            {{ item.device.name }}\n          </router-link>\n        </template>\n\n        <template v-slot:item.username=\"{ item }\">\n          <v-tooltip bottom v-if=\"!item.authenticated\">\n            <template #activator=\"{ on }\">\n            </template>\n            <span>Unauthorized</span>\n          </v-tooltip>\n          {{ item.username }}\n        </template>\n\n        <template v-slot:item.authenticated=\"{ item }\">\n          <v-tooltip bottom>\n            <template #activator=\"{ on }\">\n              <v-icon v-on=\"on\" :color=\"item.active ? 'success' : ''\" size=\"\" v-if=\"item.authenticated\">mdi-shield-check</v-icon>\n              <v-icon v-on=\"on\" color=\"error\" size=\"\" v-else>mdi-shield-alert</v-icon>\n            </template>\n            <span v-if=\"item.authenticated\">User has been authenticated</span>\n            <span v-else>User has not been authenticated</span>\n          </v-tooltip>\n        </template>\n\n        <template v-slot:item.ip_address=\"{ item }\">\n          <code>{{ item.ip_address }}</code>\n        </template>\n\n        <template v-slot:item.started=\"{ item }\">\n          {{ item.started_at | moment(\"ddd, MMM Do YY, h:mm:ss a\")}}\n        </template>\n\n        <template v-slot:item.last_seen=\"{ item }\">\n          {{ item.last_seen | moment(\"ddd, MMM Do YY, h:mm:ss a\")}}\n        </template>\n\n        <template v-slot:item.actions=\"{ item }\">\n          <v-icon class=\"icons\" @click=\"detailsSession(item)\">\n            info\n          </v-icon>\n\n          <v-icon class=\"icons ml-1\" v-if=\"item.active\" @click=\"closeSession(item)\">\n            mdi-close-circle\n          </v-icon>\n        </template>\n      </v-data-table>\n    </v-card-text>\n  <v-snackbar v-model=\"sessionSnack\" :timeout=3000>Session closed</v-snackbar>\n  </v-card>\n\n</fragment>\n</template>\n\n<script>\nexport default {\n  name: \"SessionList\",\n\n  data() {\n    return {\n      sessionSnack: false,\n      numberSessions: 0,\n      listSessions: [],\n      data: [],\n      pagination: {},\n\n      headers: [\n        {\n          text: \"Active\",\n          value: \"active\",\n          align: \"center\"\n        },\n        {\n          text: \"Device\",\n          value: \"device\",\n          align: \"center\"\n        },\n        {\n          text: \"Username\",\n          value: \"username\",\n          align: \"center\"\n        },\n        {\n          text: \"Authenticated\",\n          value: \"authenticated\",\n          align: \"center\"\n        },\n        {\n          text: \"IP Address\",\n          value: \"ip_address\",\n          align: \"center\"\n        },\n        {\n          text: \"Started\",\n          value: \"started\",\n          align: \"center\"\n        },\n        {\n          text: \"Last Seen\",\n          value: \"last_seen\",\n          align: \"center\"\n        },\n        {\n          text: \"Actions\",\n          value: \"actions\",\n          align: \"center\"\n        }\n      ]\n    };\n  },\n\n  watch: {\n    pagination: {\n      async handler () {\n        const rowsPerPage = this.pagination.itemsPerPage\n        const pageNumber = this.pagination.page\n\n        this.data =  [{'per_page': rowsPerPage, 'page':pageNumber}]\n\n        await this.$store.dispatch(\"sessions/fetch\", this.data[0]);\n        this.listSessions = this.$store.getters[\"sessions/list\"];\n        this.numberSessions = this.$store.getters[\"sessions/getNumberSessions\"]; \n      },\n      deep: true\n    },\n  },\n\n  methods: {\n    detailsSession(session) {\n      this.$router.push(\"/session/\" + session.uid);\n    },\n    async closeSession(session) {\n      if (confirm(\"Are you sure?\", session)) {\n        this.$store.dispatch(\"sessions/close\", session);\n        this.sessionSnack = true;\n\n        await this.$store.dispatch(\"sessions/fetch\");\n        this.listSessions = this.$store.getters[\"sessions/list\"];\n      }\n    },\n  }\n};\n</script>\n"]}]}