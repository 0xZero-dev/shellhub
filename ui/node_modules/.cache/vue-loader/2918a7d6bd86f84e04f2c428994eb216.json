{"remainingRequest":"/home/ubuntu/shellhub/ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/shellhub/ui/src/components/device/DeviceDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ubuntu/shellhub/ui/src/components/device/DeviceDetails.vue","mtime":1589018514661},{"path":"/home/ubuntu/shellhub/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ubuntu/shellhub/ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ubuntu/shellhub/ui/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/ubuntu/shellhub/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ubuntu/shellhub/ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgVGVybWluYWxEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL3Rlcm1pbmFsL1Rlcm1pbmFsRGlhbG9nLnZ1ZSc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGV2aWNlRGV0YWlscycsCgogIGNvbXBvbmVudHM6IHsKICAgIFRlcm1pbmFsRGlhbG9nCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZzpmYWxzZSwKICAgICAgdWlkOiAnJywKICAgICAgaG9zdG5hbWU6IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSwKICAgICAgZWRpdE5hbWU6ICcnLAogICAgICBoaWRlOnRydWUsCiAgICAgIGRldmljZTogW10sCiAgICAgIGRldmljZUljb246IHsKICAgICAgICBhcmNoOiAnZmwtYXJjaGxpbnV4JywKICAgICAgICB1YnVudHU6ICdmbC11YnVudHUnLAogICAgICAgIHJhc3BiaWFuOiAnZmwtcmFzcGJlcnJ5LXBpJywKICAgICAgICAndWJ1bnR1LWNvcmUnOiAnZmwtdWJ1bnR1JwogICAgICB9LAogICAgfTsKICB9LAoKICBhc3luYyBjcmVhdGVkKCkgewogICAgdGhpcy51aWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICB0cnl7CiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdkZXZpY2VzL2dldCcsIHRoaXMudWlkKTsKICAgICAgdGhpcy5kZXZpY2UgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyJkZXZpY2VzL2dldCJdOwogICAgfQogICAgY2F0Y2goZXJyb3IpewogICAgICB0aGlzLmhpZGU9ZmFsc2U7CiAgICAgIHRoaXMuZGlhbG9nPXRydWU7CiAgICB9IAogIH0sCiAgbWV0aG9kczogewogICAgc2F2ZSgpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2RldmljZXMvcmVuYW1lJywgewogICAgICAgIHVpZDogdGhpcy5kZXZpY2UudWlkLAogICAgICAgIG5hbWU6IHRoaXMuZWRpdE5hbWUKICAgICAgfSk7CgogICAgICB0aGlzLmRldmljZS5uYW1lID0gdGhpcy5lZGl0TmFtZTsKICAgIH0sCiAgICByZW1vdmUoKSB7CiAgICAgIGlmIChjb25maXJtKCdBcmUgeW91IHN1cmU/JykpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZGV2aWNlcy9yZW1vdmUnLCB0aGlzLmRldmljZS51aWQpOwogICAgICB9CiAgICB9LAogICAgZm9ybWF0X2RhdGUoKSB7CiAgICAgIHJldHVybiBtb21lbnQoU3RyaW5nKHRoaXMuZGV2aWNlLmxhc3Rfc2VlbikpLmZvcm1hdCgnREQtTU0tWVlZWScpOwogICAgfSwKICAgIHJlZGlyZWN0KCl7CiAgICAgIHRoaXMuZGlhbG9nPWZhbHNlOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2RldmljZXMnKTsKICAgIH0KICB9LAoKfTsK"},{"version":3,"sources":["DeviceDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"DeviceDetails.vue","sourceRoot":"src/components/device","sourcesContent":["<template>\n<fragment>\n\n  <div class=\"d-flex pa-0 align-center\">\n    <h1 v-if=\"hide\">Device Details</h1>\n  </div>\n  \n  <v-card class=\"mt-2\" v-if=\"hide\">\n    <v-toolbar flat color=\"transparent\">\n      \n      <v-edit-dialog :return-value=\"editName\" large @open=\"editName = device.name\" @save=\"save()\">\n        <v-text-field slot=\"input\" v-model=\"editName\" label=\"Edit\" single-line></v-text-field>\n        <v-toolbar-title>\n          <v-icon color=\"success\" v-if=\"this.device.online\">check_circle</v-icon>\n          <v-tooltip bottom v-else>\n            <template #activator=\"{ on }\">\n              <v-icon v-on=\"on\">check_circle</v-icon>\n            </template>\n            <span>active {{ device.last_seen | moment(\"from\", \"now\") }}</span>\n          </v-tooltip>\n          {{ this.device.name }}\n          <v-icon small left>mdi-file-edit</v-icon>\n        </v-toolbar-title>\n      </v-edit-dialog>\n      \n      <v-spacer></v-spacer>\n      \n      <TerminalDialog :uid=\"device.uid\"></TerminalDialog>\n      \n      <v-btn icon>\n        <v-icon @click=\"remove()\">delete</v-icon>\n      </v-btn>\n    </v-toolbar>\n\n      <v-divider></v-divider>\n\n      <v-card-text>\n        <div class=\"mt-2\">\n          <div class=\"overline\">UID</div>\n          <div>{{ this.device.uid }}</div>\n        </div>\n        \n        <div class=\"mt-2\">\n          <div class=\"overline\">MAC</div>\n          <code v-if=\"this.device.identity\">{{ this.device.identity['mac'] }}</code>\n        </div>\n\n        <div class=\"mt-2\">\n          <div class=\"overline\">Operating System</div>\n          <div v-if=\"this.device.info\">\n            <v-icon left>{{ deviceIcon[device.info.id] || 'fl-tux' }}</v-icon>\n            {{ this.device.info.pretty_name }}\n          </div>\n        </div>\n\n        <div class=\"mt-2\">\n          <div class=\"overline\">Last Seen</div>\n          <div>{{ this.device.last_seen | moment(\"dddd, MMMM Do YYYY, h:mm:ss a\") }}</div>\n        </div>\n      </v-card-text>\n\n    </v-card>\n\n  <div class=\"text-center\">\n    <v-dialog persistent v-model=\"dialog\" width=\"500\">\n      <v-card>\n        <v-card-title class=\"headline grey lighten-2\" primary-title>\n          Device ID error\n        </v-card-title>\n        <v-card-text>\n        <br>\n          You tried to access a non-existing device ID.\n        </v-card-text>\n        <v-divider></v-divider>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"primary\" text @click=\"redirect\">\n            Go back to devices\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</fragment>\n</template>\n\n<script>\n\nimport TerminalDialog from '@/components/terminal/TerminalDialog.vue';\nimport moment from 'moment';\n\nexport default {\n  name: 'DeviceDetails',\n\n  components: {\n    TerminalDialog\n  },\n\n  data() {\n    return {\n      dialog:false,\n      uid: '',\n      hostname: window.location.hostname,\n      editName: '',\n      hide:true,\n      device: [],\n      deviceIcon: {\n        arch: 'fl-archlinux',\n        ubuntu: 'fl-ubuntu',\n        raspbian: 'fl-raspberry-pi',\n        'ubuntu-core': 'fl-ubuntu'\n      },\n    };\n  },\n\n  async created() {\n    this.uid = this.$route.params.id;\n    try{\n      await this.$store.dispatch('devices/get', this.uid);\n      this.device = this.$store.getters[\"devices/get\"];\n    }\n    catch(error){\n      this.hide=false;\n      this.dialog=true;\n    } \n  },\n  methods: {\n    save() {\n      this.$store.dispatch('devices/rename', {\n        uid: this.device.uid,\n        name: this.editName\n      });\n\n      this.device.name = this.editName;\n    },\n    remove() {\n      if (confirm('Are you sure?')) {\n        this.$store.dispatch('devices/remove', this.device.uid);\n      }\n    },\n    format_date() {\n      return moment(String(this.device.last_seen)).format('DD-MM-YYYY');\n    },\n    redirect(){\n      this.dialog=false;\n      this.$router.push('/devices');\n    }\n  },\n\n};\n</script>\n"]}]}