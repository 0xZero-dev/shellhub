(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["devices"],{"37a4":function(e,t,a){},"85b1":function(e,t,a){"use strict";var n=a("37a4"),i=a.n(n);i.a},aa72:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DeviceList")],1)},i=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("fragment",[a("div",{staticClass:"d-flex pa-0 align-center"},[a("h1",[e._v("Devices")]),a("v-spacer"),a("v-spacer"),a("DeviceAdd"),a("v-btn",{attrs:{outlined:""},on:{click:function(t){return e.$store.dispatch("modals/showAddDevice",!0)}}},[e._v("Add Device")])],1),a("v-card",{staticClass:"mt-2"},[a("v-app-bar",{attrs:{flat:"",color:"transparent"}}),a("v-divider"),a("v-card-text",{staticClass:"pa-0"},[a("v-data-table",{attrs:{headers:e.headers,items:e.listDevices,"item-key":"uid","sort-by":["started_at"],"sort-desc":[!0],"items-per-page":10,"footer-props":{"items-per-page-options":[10,25,50,100]},"server-items-length":this.numberDevices,options:e.pagination,"disable-sort":!0},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"item.online",fn:function(t){var n=t.item;return[n.online?a("v-icon",{attrs:{color:"success"},on:{click:function(t){return t.stopPropagation(),e.detailsDevice(n)}}},[e._v("check_circle")]):a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-icon",e._g({},n),[e._v("check_circle")])]}}],null,!0)},[a("span",[e._v("last seen "+e._s(e._f("moment")(n.last_seen,"from","now")))])])]}},{key:"item.uid",fn:function(t){var n=t.item;return[a("v-chip",{staticClass:"short",attrs:{color:"blue lighten-2"}},[a("span",[e._v(e._s(n.uid))]),a("v-icon",{directives:[{name:"clipboard",rawName:"v-clipboard",value:n.uid,expression:"item.uid"},{name:"clipboard",rawName:"v-clipboard:success",value:e.showCopySnack,expression:"showCopySnack",arg:"success"}],attrs:{small:"",dark:"","right@click.stop":""}},[e._v("mdi-content-copy none-text")])],1)]}},{key:"item.info.pretty_name",fn:function(t){var n=t.item;return[a("v-icon",{attrs:{left:""}},[e._v(e._s(e.deviceIcon[n.info.id]||"fl-tux"))]),e._v(" "+e._s(n.info.pretty_name)+" ")]}},{key:"item.identity.mac",fn:function(t){var n=t.item;return[a("code",[e._v(e._s(n.identity.mac))])]}},{key:"item.namespace",fn:function(t){var n=t.item;return[a("v-chip",{staticClass:"list-itens"},[e._v(" "+e._s(e.address(n))),a("v-icon",{directives:[{name:"clipboard",rawName:"v-clipboard",value:function(){return e.address(n)},expression:"() => address(item)"},{name:"clipboard",rawName:"v-clipboard:success",value:e.showCopySnack,expression:"showCopySnack",arg:"success"}],attrs:{small:"",right:""},on:{click:function(e){e.stopPropagation()}}},[e._v("mdi-content-copy")])],1)]}},{key:"item.call_home",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"icons",on:{click:function(t){return e.disableCallhome(n)}}},[e._v("cancel")]),a("v-icon",{staticClass:"icons",on:{click:function(t){return e.enableCallhome(n)}}},[e._v("check_circle")])]}},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"icons",on:{click:function(t){return e.detailsDevice(n)}}},[e._v("info")]),n.online?a("TerminalDialog",{attrs:{uid:n.uid}}):e._e(),a("v-icon",{on:{click:function(t){return e.remove(n.uid)}}},[e._v("delete")])]}}])})],1),a("v-snackbar",{attrs:{timeout:3e3},model:{value:e.copySnack,callback:function(t){e.copySnack=t},expression:"copySnack"}},[e._v("Device SSHID copied to clipboard")]),a("v-snackbar",{attrs:{timeout:3e3},model:{value:e.showMsg,callback:function(t){e.showMsg=t},expression:"showMsg"}},[e._v("Device call home status changed. Please refresh page.")])],1)],1)},s=[],o=(a("99af"),a("b0c0"),a("96cf"),a("1da1")),r=a("d777"),l=a("b58a"),u={name:"DeviceList",components:{TerminalDialog:r["a"],DeviceAdd:l["a"]},data:function(){return{hostname:window.location.hostname,numberDevices:0,listDevices:[],pagination:{},deviceIcon:{arch:"fl-archlinux",ubuntu:"fl-ubuntu",raspbian:"fl-raspberry-pi","ubuntu-core":"fl-ubuntu"},copySnack:!1,showMsg:!1,editName:"",headers:[{text:"Online",value:"online",align:"center"},{text:"Name",value:"name"},{text:"Operating System",value:"info.pretty_name"},{text:"SSHID",value:"namespace",align:"center"},{text:"Call Home",value:"call_home",align:"center"},{text:"Actions",value:"actions",align:"center",sortable:!1}]}},watch:{pagination:{handler:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.pagination.itemsPerPage,n=e.pagination.page,e.data=[{per_page:a,page:n}],t.next=5,e.$store.dispatch("devices/fetch",e.data[0]);case 5:e.listDevices=e.$store.getters["devices/list"],e.numberDevices=e.$store.getters["devices/getNumberDevices"];case 7:case"end":return t.stop()}}),t)})))()},deep:!0}},methods:{detailsDevice:function(e){this.$router.push("/device/"+e.uid)},address:function(e){return"".concat(e.namespace,".").concat(e.name,"@").concat(this.hostname)},copy:function(e){this.$clipboard(e.uid)},remove:function(e){confirm("Are you sure?")&&this.$store.dispatch("devices/remove",e)},disableCallhome:function(e){this.$store.dispatch("devices/disableCallhome",e),this.showMsg=!0},enableCallhome:function(e){this.$store.dispatch("devices/enableCallhome",e),this.showMsg=!0},showCopySnack:function(){this.copySnack=!0},save:function(e){this.$store.dispatch("devices/rename",{uid:e.uid,name:this.editName}),e.name=this.editName}}},d=u,v=(a("85b1"),a("2877")),p=a("6544"),m=a.n(p),f=a("40dc"),h=a("8336"),b=a("b0af"),_=a("99d9"),g=a("cc20"),k=a("8fea"),y=a("ce7e"),w=a("132d"),D=a("2db4"),C=a("2fa4"),x=a("3a2f"),S=Object(v["a"])(d,c,s,!1,null,"2f110ec8",null),$=S.exports;m()(S,{VAppBar:f["a"],VBtn:h["a"],VCard:b["a"],VCardText:_["b"],VChip:g["a"],VDataTable:k["a"],VDivider:y["a"],VIcon:w["a"],VSnackbar:D["a"],VSpacer:C["a"],VTooltip:x["a"]});var V={name:"Devices",components:{DeviceList:$}},N=V,A=Object(v["a"])(N,n,i,!1,null,null,null);t["default"]=A.exports}}]);
//# sourceMappingURL=devices.a5bee91e.js.map